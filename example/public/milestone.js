!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).test_notification={})}(this,(function(n){"use strict";var t=function(){return t=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},t.apply(this,arguments)};function e(n,t,e,o){return new(e||(e=Promise))((function(i,a){function r(n){try{c(o.next(n))}catch(n){a(n)}}function s(n){try{c(o.throw(n))}catch(n){a(n)}}function c(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(r,s)}c((o=o.apply(n,t||[])).next())}))}function o(n,t){var e,o,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=s(0),r.throw=s(1),r.return=s(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(e=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(n,a)}catch(n){s=[6,n],o=0}finally{e=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var i=function(){function n(n){var e=n.apiKey,o=n.agentType,i=n.theme,a=void 0===i?{}:i;this.apiKey=e,this.agentType=o;this.theme=t(t({},{buttonColor:"#25314B",chatWindowColor:"#ffffff",textColor:"#333"}),a),this.isOpen=!1,this.loadStyles(),this.initUI(),this.addClickOutsideListener(),this.loadMessages()}return n.prototype.loadStyles=function(){var n=document.createElement("style");n.innerHTML=".chatbot-button {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        width: 60px;\n        height: 60px;\n        background-color: ".concat(this.theme.buttonColor,";\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n        z-index: 1000;\n        transition: transform 0.3s ease;\n    }\n\n    .chat-circle-icon {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        margin: auto;\n    }\n\n    .chat-icon {\n        color: white;\n        font-size: 24px;\n    }\n\n    .chat-window {\n        position: fixed;\n        bottom: 90px;\n        right: 20px;\n        width: 100%;\n        max-width: 400px;\n        height: 70%;\n        max-height: 600px;\n        background-color: ").concat(this.theme.chatWindowColor,";\n        border-radius: 15px;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n        display: flex;\n        flex-direction: column;\n        z-index: 1000;\n        overflow: hidden;\n        transform-origin: bottom right;\n        transform: scale(0);\n        opacity: 0;\n        transition: transform 0.3s ease, opacity 0.3s ease;\n    }\n\n    @media (max-width: 600px) {\n        .chat-window {\n            width: 90%;\n            bottom: 90px;\n        }\n    }\n\n    .chat-window.open {\n        transform: scale(1);\n        opacity: 1;\n    }\n\n    .chat-header {\n        padding: 15px;\n        background-color: ").concat(this.theme.buttonColor,";\n        color: white;\n        font-size: 18px;\n        font-weight: 600;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        border-top-left-radius: 15px;\n        border-top-right-radius: 15px;\n    }\n\n    .header-image {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        margin-right: 10px;\n    }\n\n    .close-button {\n        cursor: pointer;\n        font-size: 24px;\n        color: white;\n        margin-left: 10px;\n    }\n\n    .clear {\n        cursor: pointer;\n        font-size: 12px;\n        font-weight: 400;\n        color: white;\n        margin-left: 10px;\n    }\n\n    .chat-display {\n        flex: 1;\n        padding: 15px;\n        overflow-y: auto;\n        background-color: #ffffff;\n        font-size: 15px;\n    }\n\n    .chat-display::-webkit-scrollbar {\n        width: 5px;\n    }\n      \n    .chat-display::-webkit-scrollbar-thumb {\n        background-color: #888;\n        border-radius: 10px;\n    }\n      \n    .chat-display::-webkit-scrollbar-track {\n        background: #f1f1f1;\n    }  \n\n    .message-container {\n        display: flex;\n        margin: 8px 0;\n        align-items: flex-end;\n    }\n\n    .message-container.right {\n        justify-content: flex-end;\n    }\n    \n    .message-bubble {\n        max-width: 70%;\n        padding: 12px 18px;\n        border-radius: 15px;\n        white-space: pre-wrap;\n        font-size: 14px;\n        word-break: break-word; \n        flex-shrink: 1;\n    }\n    \n    .message-container.right .message-bubble {\n        background-color: ").concat(this.theme.buttonColor,";\n        color: white;\n        border-bottom-right-radius: 0;\n    }\n    \n    .message-container.left .message-bubble {\n        background-color: #e0e0e0;\n        color: ").concat(this.theme.textColor,";\n        border-bottom-left-radius: 0;\n        display: flex;\n        align-items: center;\n    }       \n\n    .profile-image {\n        width: 24px;\n        height: 24px;\n        border-radius: 50%;\n        margin-right: 8px;\n    }\n\n    .chat-input-container {\n        display: flex;\n        padding: 4px;\n        border: 1px solid #ddd;\n        border-radius: 25px;\n        outline: none;\n        margin: 15px;\n        margin-top: 10px;\n        margin-bottom: 20px;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .chat-input-container input {\n        flex: 1;\n        padding: 10px;\n        border: none;\n        font-size: 14px;\n        outline: none;\n    }\n\n    .send-button {\n        cursor: pointer;\n        width: 32px;\n        height: 32px;\n        border-radius: 50%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border: none;\n        background-color: ").concat(this.theme.buttonColor,";\n    }\n\n    .send-icon {\n        width: 32px;\n        height: 32px;\n    }\n"),document.head.appendChild(n)},n.prototype.initUI=function(){var n=this;this.chatButton=document.createElement("div"),this.chatButton.className="chatbot-button",this.chatButton.innerHTML='<img src="https://cdn-icons-png.flaticon.com/128/18221/18221591.png" alt="Chat" class="chat-circle-icon">',document.body.appendChild(this.chatButton),this.chatButton.addEventListener("click",(function(t){t.stopPropagation(),n.toggleChatWindow()})),this.chatWindow=document.createElement("div"),this.chatWindow.className="chat-window",document.body.appendChild(this.chatWindow);var t=document.createElement("div");t.className="chat-header",t.innerHTML='\n          <img src="https://cdn-icons-png.flaticon.com/128/18221/18221591.png" alt="Bot" class="header-image">\n          <span>ChatBot</span>\n          <span>\n            <span class="clear">Clear</span>\n            <span class="close-button">âœ•</span>\n          </span>\n        ',t.querySelector(".close-button").addEventListener("click",(function(){return n.toggleChatWindow()})),t.querySelector(".clear").addEventListener("click",(function(){return n.clearMessages()})),this.chatWindow.appendChild(t),this.chatDisplay=document.createElement("div"),this.chatDisplay.className="chat-display",this.chatWindow.appendChild(this.chatDisplay);var e=document.createElement("div");e.className="chat-input-container",this.chatInput=document.createElement("input"),this.chatInput.type="text",this.chatInput.placeholder="Message...",e.appendChild(this.chatInput);var o=document.createElement("button");o.className="send-button",o.innerHTML='<img src="https://cdn-icons-png.flaticon.com/128/14025/14025522.png" alt="Send" class="send-icon" />',o.addEventListener("click",(function(){return n.handleSendMessage()})),this.chatInput.addEventListener("keypress",(function(t){"Enter"===t.key&&n.handleSendMessage()})),e.appendChild(o),this.chatWindow.appendChild(e)},n.prototype.toggleChatWindow=function(){this.isOpen=!this.isOpen,this.chatWindow.classList.toggle("open",this.isOpen),this.isOpen&&this.loadMessages()},n.prototype.handleSendMessage=function(){return e(this,void 0,void 0,(function(){var n,t;return o(this,(function(e){switch(e.label){case 0:return(n=this.chatInput.value.trim())?(this.appendMessage("You",n,"right"),this.chatInput.value="",[4,this.getBotResponse(n)]):[2];case 1:return t=e.sent(),this.appendMessage("Bot",t,"left"),this.saveMessages(),[2]}}))}))},n.prototype.appendMessage=function(n,t,e){var o=document.createElement("div");if(o.className="message-container ".concat(e),"left"===e&&"Bot"===n){var i=document.createElement("img");i.src="https://cdn-icons-png.flaticon.com/128/18221/18221591.png",i.className="profile-image",o.appendChild(i)}var a=document.createElement("div");a.className="message-bubble",a.textContent=t,o.appendChild(a),this.chatDisplay.appendChild(o),this.chatDisplay.scrollTop=this.chatDisplay.scrollHeight},n.prototype.getBotResponse=function(n){return e(this,void 0,void 0,(function(){var t,e,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch("https://api-inference.huggingface.co/models/".concat(this.agentType),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({inputs:n})})];case 1:return[4,o.sent().json()];case 2:return t=o.sent(),[2,(null===(i=null==t?void 0:t[0])||void 0===i?void 0:i.generated_text)||"I'm sorry, I don't understand that."];case 3:return e=o.sent(),console.error("Error:",e),[2,"Error occurred. Please try again."];case 4:return[2]}}))}))},n.prototype.saveMessages=function(){var n=Array.from(this.chatDisplay.children).map((function(n){var t=n.classList.contains("left");return{text:n.innerText.trim(),isBot:t}}));localStorage.setItem("chatMessages",JSON.stringify(n))},n.prototype.loadMessages=function(){var n=this,t=JSON.parse(localStorage.getItem("chatMessages")||"[]");t.length>0?(this.chatDisplay.innerHTML="",t.forEach((function(t){var e=t.text,o=t.isBot;n.appendMessage(o?"Bot":"You",e,o?"left":"right")}))):(this.appendMessage("Bot","Hello! How can I assist you today?","left"),this.saveMessages())},n.prototype.clearMessages=function(){localStorage.removeItem("chatMessages"),this.chatDisplay.innerHTML=""},n.prototype.addClickOutsideListener=function(){var n=this;document.addEventListener("click",(function(t){n.chatWindow.contains(t.target)||n.chatButton.contains(t.target)||(n.chatWindow.classList.remove("open"),n.isOpen=!1)}))},n}();window&&(window.ChatBot=i),n.ChatBot=i}));
